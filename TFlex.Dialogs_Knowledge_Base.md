# База знаний по классам в пространстве имён TFlex.Dialogs

## ModalDialog

**Описание:** Базовый класс для создания модальных диалоговых окон в T-Flex CAD.

**Основные свойства:**
- `Caption`: string - заголовок диалогового окна
- `Pages`: коллекция страниц диалога
- `DialogResult`: bool - результат выполнения диалога

**Основные методы:**
- `ShowDialog()`: отображение диалога и ожидание ответа пользователя
- Конструктор: `ModalDialog(string caption)`

**Наследование:** Все пользовательские диалоги наследуются от этого класса.

**Использование:** Для создания диалогов настройки параметров, выбора опций, ввода данных.

## ModalDialogPage

**Описание:** Класс представляет отдельную страницу в многостраничном диалоге.

**Основные свойства:**
- `Caption`: string - заголовок страницы
- `Controls`: коллекция элементов управления на странице
- `Visible`: bool - видимость страницы

**Использование:** Для организации сложных диалогов с несколькими вкладками или шагами.

## GridControl

**Описание:** Контейнер для размещения элементов управления в виде сетки.

**Основные свойства:**
- `RowCount`: int - количество строк
- `ColumnCount`: int - количество столбцов

**Основные методы:**
- `SetControl(int row, int col, Control control)`: размещение элемента в ячейке
- `SetAutoWidth(int column)`: автоматическая ширина столбца
- `SetColumnWidth(int column, int width)`: установка ширины столбца

**Использование:** Для создания упорядоченных форм ввода с выравниванием элементов.

## ControlsWindowForm

**Описание:** Контейнер для группировки связанных элементов управления.

**Основные свойства:**
- `Caption`: string - заголовок группы
- `Controls`: коллекция дочерних элементов

**Использование:** Для логической группировки элементов в диалогах.

## CheckState

**Перечисление состояний элементов с двумя или тремя состояниями:**

- `Unchecked` - не отмечено
- `Checked` - отмечено
- `Indeterminate` - неопределенное состояние (для иерархических флажков)

**Использование:** Для флажков, переключателей и других элементов с состояниями.

## ToggleControl

**Описание:** Элемент управления с двумя состояниями (флажок).

**Основные свойства:**
- `Text`: string - текст рядом с флажком
- `CheckState`: CheckState - текущее состояние
- `Enabled`: bool - доступность элемента

**Основные события:**
- `CheckStateChanged`: изменение состояния

**Использование:** Для включения/отключения опций, выбора параметров.

## NumericInputControl

**Описание:** Поле для ввода числовых значений с валидацией.

**Основные свойства:**
- `Value`: double - текущее значение
- `Minimum`: double - минимальное значение
- `Maximum`: double - максимальное значение
- `Step`: double - шаг изменения
- `Caption`: string - заголовок поля
- `Enabled`: bool - доступность

**Основные события:**
- `ValueChanged`: изменение значения

**Использование:** Для ввода размеров, параметров, координат с автоматической валидацией.

## TabControl

**Описание:** Элемент управления с вкладками для организации контента.

**Основные методы:**
- `AddTab(ControlsWindowForm tab)`: добавление вкладки

**Использование:** Для многостраничных диалогов с переключением между разделами.

## Дополнительная информация

### Структура диалога
```
ModalDialog
├── ModalDialogPage (страница 1)
│   ├── GridControl (сетка)
│   │   ├── ControlsWindowForm (группа 1)
│   │   │   ├── ToggleControl
│   │   │   └── NumericInputControl
│   │   └── ControlsWindowForm (группа 2)
│   │       └── ...
│   └── TabControl (вкладки)
│       ├── ControlsWindowForm (вкладка 1)
│       └── ControlsWindowForm (вкладка 2)
└── ModalDialogPage (страница 2)
    └── ...
```

### События элементов управления
- Все элементы управления поддерживают стандартные события (.NET)
- `ValueChanged`, `CheckStateChanged`, `Click` и т.д.
- Обработчики событий используются для валидации и обновления UI

### Валидация данных
- `NumericInputControl` автоматически проверяет min/max
- Для сложной валидации использовать обработчики событий
- Показывать сообщения об ошибках через `MessageBox`

### Многостраничные диалоги
- Использовать `ModalDialogPage` для отдельных шагов
- Управлять видимостью страниц программно
- Добавлять кнопки навигации (Назад/Далее/Готово)

### Динамические элементы
- Элементы можно добавлять/удалять во время выполнения
- Изменять свойства (Enabled, Visible) в зависимости от состояния
- Перестраивать сетки при изменении количества элементов

### Интеграция с моделью
- Диалоги обычно работают с `ShaftData` или подобными классами
- Загружать данные в контролы при открытии
- Сохранять данные при подтверждении диалога

### Стили и темы
- Диалоги наследуют стиль T-Flex CAD
- Элементы управления имеют стандартный вид
- Возможна кастомизация через свойства

### Обработка ошибок
- Проверять корректность данных перед закрытием диалога
- Использовать try-catch в обработчиках событий
- Показывать понятные сообщения пользователю

### Производительность
- Избегать создания большого количества элементов
- Использовать виртуализацию для списков
- Лazy loading для сложных элементов</content>
<parameter name="filePath">d:\work\T-Flex\macros\Source\TFlex.Dialogs_Knowledge_Base.md