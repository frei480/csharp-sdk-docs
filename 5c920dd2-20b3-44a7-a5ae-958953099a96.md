

Руководство по T-FLEX CAD Open API

# Сглаживание граней  
```csharp
public static void FaceBlending()
{
	Document document = TFlex.Application.ActiveDocument;//Получение активного документа
	document.BeginChanges("операция сглаживания граней");//Открытие блока изменений документа

	//путь
	PathConstruction pathConstruction = new PathConstruction(document);
	TFlex.Model.Model2D.Contour cn = pathConstruction.Contour;//контур

	//создание узлов
	FreeNode fn1 = new FreeNode(document, -200, 50);            
	FreeNode fn2 = new FreeNode(document, -160, 100);
	FreeNode fn3 = new FreeNode(document, -120, 50);            
	FreeNode fn4 = new FreeNode(document, -80, 100);  

	//соединяем узлы линиями
	ConstructionOutline l1 = new ConstructionOutline(document, fn1, fn2);
	ConstructionOutline l2 = new ConstructionOutline(document, fn2, fn3);
	ConstructionOutline l3 = new ConstructionOutline(document, fn3, fn4);

	double r = 68;    

	//дуга окружности, проходящая через два узла с заданным радиусом
	TwoPointArcOutline twoPointArcOutline = new TwoPointArcOutline(document, fn4, fn1, r);    

	//отнесение этих линий к контуру 
	OutlineContourSegment s1 = new OutlineContourSegment(cn);
	OutlineContourSegment s2 = new OutlineContourSegment(cn);
	OutlineContourSegment s3 = new OutlineContourSegment(cn);
	OutlineContourSegment s4 = new OutlineContourSegment(cn);             
	s1.Outline = l1; s2.Outline = l2; s3.Outline = l3;s4.Outline = twoPointArcOutline;  

	//создание штриховки
	Area ar = new Area (document); 
	TFlex.Model.Model2D.Contour cn1 = ar.AppendContour(); 
	//путь - контур штирховки
	ConstructionContourSegment seg1 = new ConstructionContourSegment(cn1); 
	seg1.Construction = pathConstruction; 

	//построение профиля
	StandardWorkplane swp = new StandardWorkplane(document, StandardWorkplane.StandardType.Left); 
	AreaProfile areaProfile = new AreaProfile(document); 
	areaProfile.Area = ar; //профиль по штриховке
	areaProfile.WorkSurface = swp;//Рабочая поверхность, задающая ориентацию профиля

	//выталкивание
	ThickenExtrusion ex = new ThickenExtrusion(document); 
	ex.Thickness1 = 10; 
	ex.LengthType = ThickenExtrusion.LengthValue.AutoValue; //Данный параметр должен быть выставлен! 
	ex.ForwardLength = 50; 
	ex.Profile.Add(areaProfile.Geometry.SheetContour);     

	document.ApplyChanges();//Применить изменения без закрытия блока изменения документа           
	FaceBlending faceBlending = new FaceBlending(document);//операция сглаживания

	int r = 30;//радиус сглаживания
	//класс свойств, используемый для создания сглаживания с постоянным радиусом
	TFlex.Model.Model3D.FaceBlending.ContinuousRadiusAttribute s = new TFlex.Model.Model3D.FaceBlending.ContinuousRadiusAttribute(r);
	faceBlending.Attribute = s;//установка радиуса для операции    

	//грани тела выталкивания
	faceBlending.AddLeftFace((ModelFace)ex.Geometry.Solid[0].Faces[0]);
	faceBlending.AddRightFace((ModelFace)ex.Geometry.Solid[0].Faces[1]);    

	//реверс этих граней
	faceBlending.LeftSense = true;
	faceBlending.RightSense = true;
	faceBlending.BlendWalls = FaceBlending.WallsType.Solid;//тип результата - отдельное тело

	document.EndChanges();//Закрытие блока изменений документа
}
```