# FreeNode - База знаний для RAG-системы

## Общее описание

FreeNode представляет собой узел с абсолютными координатами в T-Flex CAD API. Это базовый элемент для создания геометрических конструкций, который определяет точку в пространстве с фиксированными координатами X и Y.

## Основные характеристики

- Тип: Узел с абсолютными координатами
- Назначение: Определение точек в пространстве с фиксированными координатами
- Использование: Создание геометрических конструкций, опорные точки для других объектов
- Связь с другими объектами: Может использоваться как параметр для создания линий, окружностей, эллипсов и других геометрических объектов

## Конструкторы

1. `FreeNode(Document doc, double x, double y)` - Создает узел с заданными координатами
2. `FreeNode(Document doc, double x, double y, double z)` - Создает трехмерный узел с заданными координатами (для 3D построений)

## Свойства

- `X` - Координата X узла (DoubleParameter)
- `Y` - Координата Y узла (DoubleParameter)
- `Z` - Координата Z узла (DoubleParameter, для 3D построений)
- `GeometryType` - Тип геометрии узла
- `SubType` - Подтип узла
- `Color` - Цвет узла
- `Layer` - Слой, на котором размещается узел
- `Level` - Уровень узла
- `Visible` - Является ли узел видимым
- `LineWidth` - Толщина линии узла
- `Style` - Стиль линии узла

## Методы

- `SetPosition(double x, double y)` - Установка новых координат узла
- `SetPosition(double x, double y, double z)` - Установка новых координат трехмерного узла
- `GetPosition()` - Получение текущих координат узла
- `Move(double deltaX, double deltaY)` - Перемещение узла на заданное расстояние
- `Move(double deltaX, double deltaY, double deltaZ)` - Перемещение трехмерного узла на заданное расстояние

## Паттерны использования

1. Создание опорных точек для геометрических конструкций
2. Определение начальных и конечных точек линий
3. Центры окружностей и эллипсов
4. Контрольные точки для сплайнов
5. Узлы для создания сложных путей

## Интеграция с другими объектами

- Используется для создания LineConstruction (SetTwoNodes)
- Используется для создания CircleConstruction (SetCenterAndRadius, SetCenterAndPoint)
- Используется для создания EllipseConstruction (SetCenterAndTwoNodes)
- Используется для создания SplineConstruction (Points.Add)
- Используется для создания PathConstruction (AddSegment)
- Может быть источником для ConstructionNode
- Может быть источником для OutlineNode

## Примеры использования

### Базовое использование

```csharp
// Создание узла с координатами (50, 30)
FreeNode node = new FreeNode(document, 50, 30);
```

### Создание массива узлов

```csharp
// Создание массива узлов для многоугольника
FreeNode[] nodes = new FreeNode[6];
for (int i = 0; i < 6; i++)
{
    double angle = 2 * Math.PI * i / 6;
    nodes[i] = new FreeNode(document, 50 + 20 * Math.Cos(angle), 50 + 20 * Math.Sin(angle));
}
```

### Интеграция с другими объектами

```csharp
// Создание линии между двумя узлами
FreeNode startNode = new FreeNode(document, 20, 30);
FreeNode endNode = new FreeNode(document, 80, 30);
LineConstruction line = new LineConstruction(document);
line.SetTwoNodes(startNode, endNode);
```

## Продвинутое использование

### Параметризованные узлы

```csharp
// Создание узлов с параметризованными координатами
double centerX = 50;
double centerY = 50;
double radius = 20;
int segments = 8;
FreeNode[] nodes = new FreeNode[segments];
for (int i = 0; i < segments; i++)
{
    double angle = 2 * Math.PI * i / segments;
    nodes[i] = new FreeNode(document, centerX + radius * Math.Cos(angle), centerY + radius * Math.Sin(angle));
}
```

### Узлы с динамическими свойствами

```csharp
// Создание узлов с возможностью динамического обновления
FreeNode dynamicNode = new FreeNode(document, 50, 50);
// Позже можно изменить координаты
dynamicNode.X.Value = 60;
dynamicNode.Y.Value = 70;
```

### Оптимизация производительности

```csharp
// Создание большого количества узлов с минимальными вызовами API
int nodeCount = 1000;
FreeNode[] nodes = new FreeNode[nodeCount];
for (int i = 0; i < nodeCount; i++)
{
    nodes[i] = new FreeNode(document, 
        20 + (i % 10) * 10, 
        20 + (i / 10) * 10);
}
```

## Связанные концепции

- ConstructionNode - Узел на линии построения
- OutlineNode - Узел на линии контура
- LineConstruction - Линия построения
- CircleConstruction - Окружность построения
- EllipseConstruction - Эллипс построения
- SplineConstruction - Сплайн построения
- PathConstruction - Путь построения

## Частые ошибки и лучшие практики

1. Не забывайте использовать BeginChanges/EndChanges при создании множества узлов
2. Используйте параметризованные узлы для создания динамических конструкций
3. При создании больших массивов узлов используйте оптимизацию производительности
4. Убедитесь, что координаты узлов находятся в допустимом диапазоне
5. Используйте узлы повторно при создании сложных конструкций

## Математические аспекты

- Координаты узлов представлены в виде DoubleParameter, что позволяет использовать их в математических выражениях
- Узлы могут быть использованы для вычисления расстояний, углов и других геометрических параметров
- Связь между узлами может быть использована для создания геометрических зависимостей

## Совместимость и ограничения

- FreeNode совместим со всеми геометрическими объектами T-Flex CAD API
- Может использоваться как в 2D, так и в 3D построениях
- Ограничения связаны с диапазоном допустимых значений координат
- При использовании в больших конструкциях может потребоваться оптимизация производительности

## Расширяемость

- FreeNode может быть расширен через наследование для создания специализированных типов узлов
- Может быть интегрирован с пользовательскими математическими функциями
- Поддерживает пользовательские свойства через механизм параметров T-Flex